<!DOCTYPE html>
<html>
  <head>
    <title>Chat</title>
  </head>
  <style>
    :root{
  --bg-1: #0f172a;
  --bg-2: #1e293b;
  --card: rgba(255,255,255,0.04);
  --muted: rgba(255,255,255,0.7);
  --accent-1: #60a5fa;
  --accent-2: #7c3aed;
}

*{box-sizing:border-box;}

html,body{
  height:100%;
  margin:0;
  font-family: Inter, Roboto, Arial, sans-serif;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

body{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  gap:12px;
  padding:32px;
  background: linear-gradient(135deg, var(--bg-1), var(--bg-2));
  color:#e6eef8;
  min-height:100vh;
}

#messages{
  width:100%;
  max-width:720px;
  margin:0;
  padding:12px;
  list-style:none;
  background:var(--card);
  border-radius:12px;
  box-shadow: 0 8px 30px rgba(2,6,23,0.6);
  max-height:60vh;
  overflow:auto;
}

#messages li{
  display:block;
  padding:10px 12px;
  margin-bottom:8px;
  border-radius:8px;
  background: rgba(255,255,255,0.02);
  border: 1px solid rgba(255,255,255,0.03);
  font-size:15px;
  line-height:1.35;
  word-wrap:break-word;
}

#messages li strong{
  color:var(--accent-1);
  margin-right:8px;
}

#msg, #butEnviar{
  width:100%;
  max-width:720px;
  display:block;
  border-radius:8px;
  font-size:16px;
  outline:none;
}

#msg{
  padding:10px 12px;
  border:1px solid rgba(255,255,255,0.06);
  background: rgba(255,255,255,0.02);
  color: #e6eef8;
  margin-top:4px;
}

#butEnviar{
  margin-top:6px;
  padding:10px 14px;
  border: none;
  cursor: pointer;
  color: #fff;
  background: linear-gradient(90deg, #2563eb 0%, #7c3aed 100%);
  box-shadow: 0 6px 18px rgba(37,99,235,0.12);
  transition: transform .06s ease, box-shadow .12s ease, opacity .08s ease;
}

#butEnviar:hover{ transform: translateY(-2px); }
#butEnviar:active{ transform: translateY(0); }
#butEnviar:disabled{ opacity:0.6; cursor:not-allowed; transform:none; }

#messages::-webkit-scrollbar{ width:8px; height:8px; }
#messages::-webkit-scrollbar-thumb{ background: rgba(255,255,255,0.06); border-radius:6px; }
#messages::-webkit-scrollbar-track{ background: transparent; }

@media (max-width:480px){
  body{ padding:16px; }
  #messages, #msg, #butEnviar{ max-width:100%; }
  #messages{ padding:8px; max-height:55vh; }
}
  </style>
  <body>
    <ul id="messages"></ul>
    <input id="msg" autocomplete="off" />
    <button id="butEnviar" onclick="enviar()">Enviar</button>

    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script>
      const socket = io();

      let nome = "";

      while (!nome) {
        nome = prompt("Digite seu nome para entrar no chat:");
      }

      document.title = "Chat - " + nome;

      const input = document.getElementById("msg");
      const ul = document.getElementById("messages");

      function enviar() {
        const texto = input.value;
        if (texto.trim() === "") return;
        
        // Envia nome + mensagem
        socket.send({ nome: nome, msg: texto });
        input.value = "";
      }

      // Recebe as mensagens do servidor
      socket.on("message", (data) => {
        const li = document.createElement("li");
        li.innerHTML = `<strong>${data.nome}:</strong> ${data.msg}`;
        ul.appendChild(li);
      });

      input.addEventListener("keydown", function(event) {
        if (event.key === "Enter") {
          event.preventDefault();
          document.getElementById("butEnviar").click();
        }
        });

    </script>
  </body>
</html>


